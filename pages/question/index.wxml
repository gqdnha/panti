<!--pages/question/index.wxml-->
<view class="container">
  <!-- 顶部进度条 -->
  <view class="progress-bar">
    <view class="progress-info">
      <text class="progress-text">进度：{{currentIndex + 1}}/{{totalQuestions}}</text>
      <text class="time-text">剩余时间：{{remainingTime}}分钟</text>
    </view>
    <view class="progress-line">
      <view class="progress-inner" style="width: {{(currentIndex + 1) / totalQuestions * 100}}%"></view>
    </view>
  </view>

  <!-- 题目内容 -->
  <view class="question-content">
    <view class="question-title">
      <text class="question-type">{{currentQuestion.type}}</text>
      <text class="question-text">{{currentQuestion.content}}</text>
    </view>

    <!-- 单选题 -->
    <view class="options-list" wx:if="{{currentQuestion.type === '单选题'}}">
      <view class="option-item {{item.selected ? 'selected' : ''}}" 
            wx:for="{{currentQuestion.options}}" 
            wx:key="index"
            bindtap="selectOption"
            data-index="{{index}}">
        <text class="option-label">{{optionLabels[index]}}</text>
        <text class="option-content">{{item.content}}</text>
      </view>
    </view>

    <!-- 多选题 -->
    <view class="options-list" wx:if="{{currentQuestion.type === '多选题'}}">
      <view class="option-item {{item.selected ? 'selected' : ''}}" 
            wx:for="{{currentQuestion.options}}" 
            wx:key="index"
            bindtap="selectMultiOption"
            data-index="{{index}}">
        <text class="option-label">{{optionLabels[index]}}</text>
        <text class="option-content">{{item.content}}</text>
      </view>
    </view>

    <!-- 判断题 -->
    <view class="options-list" wx:if="{{currentQuestion.type === '判断题'}}">
      <view class="option-item {{item.selected ? 'selected' : ''}}" 
            wx:for="{{currentQuestion.options}}" 
            wx:key="index"
            bindtap="selectOption"
            data-index="{{index}}">
        <text class="option-label">{{optionLabels[index]}}</text>
        <text class="option-content">{{item.content}}</text>
      </view>
    </view>

    <!-- 简答题 -->
    <view class="short-answer" wx:if="{{currentQuestion.type === '简答题'}}">
      <textarea class="answer-input" 
                placeholder="请输入您的答案" 
                value="{{currentQuestion.answer}}"
                bindinput="inputAnswer"
                maxlength="500"></textarea>
      <view class="word-count">{{currentQuestion.answer.length || 0}}/500</view>
    </view>
  </view>

  <!-- 底部按钮 -->
  <view class="bottom-buttons">
    <button class="prev-btn" bindtap="prevQuestion" disabled="{{currentIndex === 0}}">上一题</button>
    <button class="next-btn" bindtap="nextQuestion" wx:if="{{currentIndex < totalQuestions - 1}}">下一题</button>
    <button class="submit-btn" bindtap="submitAnswer" wx:if="{{currentIndex === totalQuestions - 1}}">提交</button>
  </view>
</view>